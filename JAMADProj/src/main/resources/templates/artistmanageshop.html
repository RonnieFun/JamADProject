<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="Fragments/layout.html :: headerfiles">
</head>
<body style="padding-bottom: 30px">
	<a th:href="@{/home}"><img th:src="@{/images/JAM_LOGO.png}"
		class="logo2"> </a>
	<nav class="navbar jamHeader3">

		<div class="navbar-form form-inline">
			<div class="input-group searchBox" style="padding-left: 5%">
				<h1>
					<Strong>Manage Shop</Strong>
				</h1>
			</div>
		</div>

		<a th:href="@{/home}" class="helpIcon btn"><i
			class="fa fa-question-circle"></i><span class="smallHelpText">Help</span></a>

		<button class="addShoppingCartIcon btn"
			onclick="location.href='/shoppingcart'">
			<i class="fa fa-cart-plus" style="font-size: 24px"></i><span
				class='badge badge-warning' id='lblCartCount' th:text="${count}"></span>
		</button>
		<a th:href="@{/home}" class="profileImageIconLink"><img
			class="profileImageIcon" th:src="${user.profileUrl}"
			alt="Artist Small Profile Photo" /> <span
			class="smallProfileNameText"
			th:text="${user.firstName} + ' ' + ${user.lastName}"></span> </a>
	</nav>

	<div class="cartIntroSection">

		<img class="smallBanner" th:src="@{/images/Banner.png}"
			alt="Artist Profile Small Banner"></img> <img
			class="profileImageIcon2" th:src="${user.profileUrl}"
			alt="Artist Profile Photo" /><span class="mediumProfileNameText"
			th:text="${user.displayName}"></span>


		<div class="aboutShopSection">
			<h4 style="padding-left: 1%; padding-top: 1%">About Shop</h4>
			<div class="container" style="padding-left: 10%; padding-right: 10%">
				<div class="box row">
					<textarea name="shopDescriptionNew" cols="50" rows="5"
						id="shopDescriptionNew" data-options="multiline:true"
						style="background: transparent; white-space: pre-wrap; resize: none"
						placeholder="Enter Shop Description Here"
						th:utext="${user.shopDescription}"></textarea>

				</div>
				<input name="Edit" type="button" style="background-color: #FFB6C1"
					value="Save" onclick="javascript:saveShopDescription()">
			</div>
		</div>
	</div>


	<!-- PRODUCTS ON SALE NAVBAR -->
	<section class="productsOnSaleSection">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-12 col-md">
					<!-- Product Categories -->
					<nav class="navbar spaceEvenly">
						<a th:if="${category} == 'allProducts'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop"
							style="color: #ff6f61; border-bottom: 1px solid #ff6f61">All
							Products</a> <a th:unless="${category} == 'allProducts'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop">All Products</a> <a
							th:if="${category} == 'musicCollection'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/musiccollection"
							style="color: #ff6f61; border-bottom: 1px solid #ff6f61">Music
							Collection</a> <a th:unless="${category} == 'musicCollection'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/musiccollection">Music Collection</a> <a
							th:if="${category} == 'merchandise'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/merchandise"
							style="color: #ff6f61; border-bottom: 1px solid #ff6f61">Merchandise</a>

						<a th:unless="${category} == 'merchandise'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/merchandise">Merchandise</a> <a
							th:if="${category} == 'clothing'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/clothing"
							style="color: #ff6f61; border-bottom: 1px solid #ff6f61">Clothing</a>

						<a th:unless="${category} == 'clothing'"
							class="nav-link active blackFontText h6" data-toggle="tab"
							href="/artist/manageshop/clothing">Clothing</a>


						<!--    			  <span style="color:#E56A6A; font-size: 1.4vw; margin-bottom: 10px;">|</span> -->

						<!--               <div class="dropdown"> -->
						<!-- 			        <a class="nav-link active blackFontText dropdown-toggle h6" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> -->
						<!-- 			          More -->
						<!-- 			        </a> -->
						<!-- 			        <ul class="dropdown-menu" aria-labelledby="navbarDropdown"> -->
						<!-- 				         <li><a class="dropdown-item" href="#">Most Popular</a></li> -->
						<!-- 				          <li><a class="dropdown-item" href="#">Highest Price</a></li> -->
						<!-- 				          <li><a class="dropdown-item" href="#">Lowest Price</a></li> -->
						<!-- 			        </ul> -->
						<!-- 			  </div> -->
					</nav>
				</div>
			</div>
		</div>
	</section>

	<!-- SELLING CONTENT -->
	&nbsp;
	<div align="center">
		<form action="/artist/addnewproduct">
			<button style="background-color: #FFB6C1">+ Add new item</button>
		</form>
	</div>

	<section class="productsContentSection2">
		<div class="container">
			<div class="row col-lg-11 mx-auto">
				<div style="margin-bottom: 18px;"></div>

				<th:block th:each="productAndCount: ${productsAndCountShop}">
					<div class="col-6 col-md-3 col-lg-3 mb-5">
						<div class="card mb-1 h-100">
							<a
								th:href="@{/artist/editproduct(productID=${productAndCount.key.productID})}">
								<img th:src="${productAndCount.key.productUrl}"
								class="card-img-top productPhotoSize">
							</a>

							<!-- Collapse -->
							<div class="card-collapse-parent">

								<!-- Body -->
								<div class="card-body px-0 bg-white">

									<!-- Heading -->

									<div class="mb-1 productHeading h6"
										th:text="${productAndCount.key.productName}"></div>

									<!-- Quantity Sold -->
									<div class="quantitySold"
										th:text="${productAndCount.value} + ' sold'"></div>

									<!-- Price -->
									<div class="mb-1 productPrice h6"
										th:text="${#numbers.formatCurrency(productAndCount.key.productPrice)}"></div>

								</div>
							</div>
						</div>
					</div>
				</th:block>
			</div>
		</div>
	</section>
	<div class="footer">
		<p style="margin-top: 3px;">@2020-2021 Jam | Term 2</p>
	</div>
</body>

<script>
	var shopDescriptionNew = document.getElementById('shopDescriptionNew');

	function saveShopDescription() {

		var shopDescription = document.getElementById('shopDescriptionNew').value;
		$.ajax({
			type : 'POST',
			url : "/artist/editShopDescription",
			contentType : 'application/x-www-form-urlencoded; charset=UTF-8',
			data : {
				newShopDescription : shopDescription
			}
		})
	}

	shopDescriptionNew.oninput = function resizeShopDescriptionSize() {

		this.style.height = "";
		this.style.height = Math.min(shopDescriptionNew.scrollHeight, 120)
				+ "px"
	}
	
	
</script>
</html>